<% user = User.get session[:user] if session[:user] %>

<fieldset class="account" style="display: none;">
	<legend style="margin-bottom: 1em;">
		<% if user %>
			You're already signed in
		<% else %>
			Create an account
		<% end %>
	</legend>
	<div class="control-group">
		<label class="control-label" for="first_name">Name</label>
		<div class="controls">
			<input type="text" class="input-small" id="first_name" name="first_name" />
			<input type="text" class="input-small" id="last_name" name="last_name" />
		</div>
	</div>
	<div class="control-group" id="email-group">
		<label class="control-label" for="email">Email address</label>
		<div class="controls">
			<input type="text" class="input-xlarge" id="email" name="email" <%= "value='#{user.email}' disabled" if user %> />
			<span class="help-inline" style="display: none;">
				That address is already being used.
				<br />
				<a href="/sign-in">Maybe you need to sign in instead...</a>
			</span>
		</div>
	</div>
	<div class="control-group">
		<label class="control-label" for="password">Password</label>
		<div class="controls">
			<input type="password" class="input-xlarge" id="password" name="password" <%= "value='secret123' disabled" if user %> />
		</div>
	</div>
	<div class="control-group">
		<div class="controls">
			How did you hear about us?
			<select id="hear-about-us" name="hear_about_us" <%= "disabled" if user %> />
				<option value="NA"></option>
				<option value="Google search">Google search</option>
				<option value="Other Internet search">Other Internet search</option>
				<option value="NBCC Web site">NBCC Web site</option>
				<option value="Friend recommended">Friend recommended</option>
				<option value="Professor recommended">Professor recommended</option>
				<option value="Other">Other</option>
				</optgroup>
			</select>
		</div>
	</div>
	<% if user %>
		<input type="hidden" name="user_id" id="user_id" value="<%= user.id %>" />
	<% end %>
</fieldset>



<fieldset class="credit-card" style="display: none;">
	<legend style="margin-bottom: 1em;">Credit card and shipping info</legend>
	<div class="control-group" id="card-number-group">
		<label class="control-label">Card number</label>
		<div class="controls">
			<input type="text" size="20" autocomplete="off" class="input-xlarge card-number">
			<span class="help-inline" id="invalid_number" style="display: none;">The card number is invalid.</span>
			<span class="help-inline" id="incorrect_number" style="display: none;">The card number is incorrect.</span>
		</div>
	</div>
	<div class="control-group" id="card-cvc-group">
		<label class="control-label">CVC</label>
		<div class="controls">
			<input type="text" size="4" autocomplete="off" class="span1 card-cvc">
			<span class="help-inline" id="invalid_cvc" style="display: none;">The card's security code is invalid.</span>
			<span class="help-inline" id="incorrect_cvc" style="display: none;">The card's security code is incorrect.</span>
		</div>
	</div>
	<div class="control-group" id="card-expiry-group">
		<label class="control-label">Expiration (MM/YYYY)</label>
		<div class="controls">
			<select class="span1 card-expiry-month">
				<option value="01">01</option>
				<option value="02">02</option>
				<option value="03">03</option>
				<option value="04">04</option>
				<option value="05">05</option>
				<option value="06">06</option>
				<option value="07">07</option>
				<option value="08">08</option>
				<option value="09">09</option>
				<option value="10">10</option>
				<option value="11">11</option>
				<option value="12">12</option>
			</select>
			/
			<select class="span1 card-expiry-year">
			<% (Chronic.parse('now').strftime('%Y').to_i..Chronic.parse('15 years from now').strftime('%Y').to_i).each do |y| %>
				<option value="<%= y %>"><%= y %></option>
			<% end %>
			</select>
			<span class="help-inline" id="invalid_expiry_month" style="display: none;">The card's expiration month is invalid.</span>
			<span class="help-inline" id="invalid_expiry_year" style="display: none;">The card's expiration year is invalid.</span>
		</div>
	</div>
	
	<div class="control-group" id="generic-card-group">
		<div class="controls">
			<span class="help-inline" id="expired_card" style="display: none;">The card has expired.</span>
			<span class="help-inline" id="invalid_amount" style="display: none;">An invalid amount was entered.</span>
			<span class="help-inline" id="card_declined" style="display: none;">The card was declined.</span>
			<span class="help-inline" id="missing" style="display: none;">There is no card on a customer that is being charged.</span>
			<span class="help-inline" id="duplicate_transaction" style="display: none;">A transaction with identical amount and credit card information was submitted very recently.</span>
			<span class="help-inline" id="processing_error" style="display: none;">An error occurred while processing the card.</span>
		</div>
	</div>
	<p style="text-align: center;"><small style="color: black;"><strong>Note:</strong> If you require we ship to a PO Box please call toll free 888-326-9229 for details.</small></p>
	<div class="control-group">
		<label class="control-label" for="address1">Address 1</label>
		<div class="controls">
			<input type="text" class="input-xlarge" id="address1" name="address1" />
		</div>
	</div>
	<div class="control-group">
		<label class="control-label" for="address2">Address 2</label>
		<div class="controls">
			<input type="text" class="input-xlarge" id="address2" name="address2" />
		</div>
	</div>	
	<div class="control-group">
		<label class="control-label" for="city">City, State Zip</label>
		<div class="controls">
			<input type="text" class="span2" id="city" name="city" />,
			<input type="text" class="span1" id="state" name="state" />
			<input type="text" class="span1" id="zip" name="zip" />
			<span class="help-inline" id="tax">+ sales tax in GA.</span>
		</div>
	</div>
</fieldset>


<fieldset class="confirmation" style="display: none;">
	
	<p><strong>Program Package:</strong> <span id="program-package-confirmation"></span></p>
	<p><strong>Optional Enhancements:</strong> <span id="optional-enhancements-confirmation">N/A</span></p>
	
	<p><strong>Name:</strong> <span id="name-confirmation"></span></p>
	<p><strong>Email address:</strong> <span id="email-confirmation"></span></p>
	<p><strong>Password:</strong> <span id="password-confirmation"></span></p>

	<p><strong>Card number:</strong> <span id="card-number-confirmation"></span></p>
	<p><strong>CVC:</strong> <span id="cvc-confirmation"></span></p>
	<p><strong>Expiration:</strong> <span id="expiration-confirmation"></span></p>
	
	<p><strong>Address:</strong> <span id="address-confirmation"></span></p>
	<p><strong>City:</strong> <span id="city-confirmation"></span></p>
	<p><strong>State:</strong> <span id="state-confirmation"></span></p>
	<p><strong>Zip:</strong> <span id="zip-confirmation"></span></p>
	
	<p style="float: left;"><br />* Required to checkout</p>
	
	<p style="text-align: right;">
		<strong style="vertical-align: middle;">Total: $<span id='total-display'></span></strong>
		&nbsp;
		<input type="submit" class="btn btn-success btn-large submit-button disabled" value="Checkout" disabled style="font-weight: bold;" />
	</p>

</fieldset>

<input type="hidden" id="amount" name="amount" value="0" />